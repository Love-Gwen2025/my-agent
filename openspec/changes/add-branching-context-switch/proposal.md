# Change: 支持 GPT 风格可切换分支的对话体验

## Why
- 现有前端已具备 BranchNavigator 组件和 checkpoint API，但未真正串联：消息缺少 checkpoint 元数据，无法根据分支加载完整上下文，也无法从分支继续对话。
- 用户希望像 GPT 网页端一样，在有多个回复分支的 AI 消息处显示 `<1/2>`，切换即可切换整段上下文，再从该分支继续聊天。

## What Changes
- 为对话历史、流式完成事件补充 checkpoint 标识，确保客户端能知道每条 AI 消息所在的分支。
- 提供基于 checkpoint 的消息拉取与兄弟分支索引能力，驱动 `<当前/总数>` 分支切换。
- 前端在有兄弟分支的 AI 消息下方展示 `<x/y>` 导航，点击左右切换后刷新整段上下文，并把当前分支作为后续提问的起点。

## Impact
- 受影响能力：新建 `chat-branching` 规格能力（含历史携带 checkpoint、分支切换、分支续写）。
- 受影响代码：后端聊天/checkpoint 路由与服务、前端聊天面板与状态管理、SSE 事件处理。
