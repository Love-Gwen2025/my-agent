# Tasks

1. 设计鉴权改造方案：确定 BCrypt 哈希兼容策略（如何识别旧明文、何时回写哈希），梳理受影响接口与 Redis 登录态清理流程。
2. 实施密码哈希与登录校验：注册/修改密码写入加密值，登录使用 `PasswordEncoder.matches`，并在识别旧明文时完成一次性迁移；补充单元/集成用例覆盖成功、错误密码、被禁用户场景。
3. 完善登出与会话清理：`/user/logout` 按 token 清除 Redis 会话索引与数据，验证退出后同一 token 访问受保护接口被拒绝。
4. 加固聊天/会话接口：流式与同步聊天在落库前校验会话存在及成员资格；机器人会话创建在缺少 body 或标题为空时采用默认标题且不抛 NPE；补充对应的服务/控制层用例。
5. 更新运行文档：同步实际技术栈（PostgreSQL + pgvector、Redis JWT、SSE/WebSocket 接口）、配置与表结构指引，移除 MySQL/Mongo 旧描述。
6. 验证与回归：运行 `mvn -DskipTests package` 或等价检查、现有/新增用例，复查日志与返回码符合需求。
